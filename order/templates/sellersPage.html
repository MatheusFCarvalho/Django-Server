<!DOCTYPE html>
<html>
<head>
  <title>vendedor</title>
  {% load static %}

  <link rel="stylesheet" type="text/css" href="{% static 'css/basic.css' %}">

  <script>

    function newForm() {
      let form = document.querySelector(".create-order-form")
      form.style.display = "block"
    }

    function closeForm() {
      let form = document.querySelector(".create-order-form")
      form.style.display = "none"
    }

    function searchOrders() {
      let input = document.getElementById("search_input").value.toLowerCase();
      let orders = document.getElementsByClassName("order-item");
      
      for (i = 0; i < orders.length; i++) {
        let order = orders[i];
        let id = order.querySelector(".order-id").textContent.toLowerCase();
        let client = order.querySelector(".order-client").textContent.toLowerCase();
        
        if (id.includes(input) || client.includes(input)) {
          order.style.display = "flex";
        } else {
          order.style.display = "none";
        }
      }
    }
    function toggleView() {
      const ordersContainer = document.querySelector('.orders-container');
      ordersContainer.classList.toggle('list-view');
    }
    
  </script>
</head>
<body>
  <div class="container">
    <h1>Pedidos</h1>
    <button id="toggle-view-btn" onclick="toggleView()">Alternar Visualização</button>
    {% comment %} <button onClick="newForm()">Registrar novo pedido</button> {% endcomment %}
    <form class="create-order-form" method="POST">
      {% csrf_token %}
      <div class="flexin">
        <div>
          <label for="order_id">*ID do Pedido:</label>
          <input type="text" id="order_id" name="order_id" required>
        </div>
        
        <div>
          <label for="order_id">Nome do cliente:</label>
          <input type="text" id="client_name" name="client_name">
        </div>
      </div>
      <button type="submit">Confirmar</button>
      <button class="red" onClick="closeForm()">Cancelar</button>
    </form>

    <label for="search_input">Buscar:</label>
    <input type="text" id="search_input" onkeyup="searchOrders()" placeholder="Digite o nome do cliente ou ID do pedido">

    <p>Boooom dia vendedores do meu coração sz o site ainda tá destualizado :/ mas estou aceitando novas ideias! aliás sua roupa ta linda hj, venda tudo e conquiste o mundo! <(o_o<)</p>
    <h2>Pedidos:</h2>
    <ul class="orders-container">
      {% for order in orders %}
      <li class="order-item {% if order.is_ready %}order-ready{% else %}order-not-ready{% endif %}">
        <div class="order-info">
          <p class="order-id">ID: <strong> {{ order.id }}</strong> | <strong>{% if order.is_ready %}Pronto{% else %}Não Pronto{% endif %}</strong></p>
          <p class="order-client">Cliente: {{ order.client }}</p>
          <p>Destino: {{ order.destiny }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</body>
</html>
